55 3
1021284247
dev_update_window 0 0 1 0 0 2 0 0
dev_update_window ('off')
'off'
read_image 0 1 1 0 0 1 0 0
read_image (Image, 'clip2.bmp')
Image
'clip2.bmp'
get_image_pointer1 1 0 0 4 0 1 0 0
get_image_pointer1 (Image, _, _, Width, Height)
Image
_
_
Width
Height
dev_close_window 0 0 0 0 0 2 0 0
dev_close_window ()
dev_open_window 0 0 5 1 0 2 0 0
dev_open_window (0, 0, Width, Height, 'black', WindowHandle)
0
0
Width
Height
'black'
WindowHandle
dev_display 1 0 0 0 0 2 0 0
dev_display (Image)
Image
dev_set_colored 0 0 1 0 0 2 0 0
dev_set_colored (12)
12
dev_set_line_width 0 0 1 0 0 2 0 0
dev_set_line_width (2)
2
dev_set_draw 0 0 1 0 0 2 0 0
dev_set_draw ('margin')
'margin'
stop 0 0 0 0 0 3 0 0
stop ()
comment 0 0 1 0 0 3 0 1
* 

comment 0 0 1 0 0 3 0 1
* /////   Create shape model   /////
/////   Create shape model   /////
read_region 0 1 1 0 0 1 0 0
read_region (Region, 'region')
Region
'region'
reduce_domain 2 1 0 0 0 1 0 0
reduce_domain (Image, Region, ImageReduced)
Image
Region
ImageReduced
inspect_shape_model 1 2 2 0 0 1 0 0
inspect_shape_model (ImageReduced, ModelImage, ModelRegion, 1, 30)
ImageReduced
ModelImage
ModelRegion
1
30
area_center 1 0 0 3 0 1 0 0
area_center (ImageReduced, _, RowRef, ColumnRef)
ImageReduced
_
RowRef
ColumnRef
dev_set_color 0 0 1 0 0 2 0 0
dev_set_color ('green')
'green'
dev_display 1 0 0 0 0 2 0 0
dev_display (ModelRegion)
ModelRegion
dev_set_color 0 0 1 0 0 2 0 0
dev_set_color ('red')
'red'
disp_cross 0 0 5 0 0 1 0 0
disp_cross (WindowHandle, RowRef, ColumnRef, 30, 0)
WindowHandle
RowRef
ColumnRef
30
0
clear_all_shape_models 0 0 0 0 0 1 0 0
clear_all_shape_models ()
create_shape_model 1 0 8 1 0 1 0 0
create_shape_model (ImageReduced, 0, rad(-180), rad(360), 0, 'no_pregeneration', 'ignore_global_polarity', 30, 10, ModelID)
ImageReduced
0
rad(-180)
rad(360)
0
'no_pregeneration'
'ignore_global_polarity'
30
10
ModelID
stop 0 0 0 0 0 3 0 0
stop ()
comment 0 0 1 0 0 3 0 1
* 

comment 0 0 1 0 0 3 0 1
* /////   Pattern Mathing (Normal)   /////
/////   Pattern Mathing (Normal)   /////
dev_display 1 0 0 0 0 2 0 0
dev_display (Image)
Image
find_shape_model 1 0 9 4 0 1 0 0
find_shape_model (Image, ModelID, rad(-180), rad(360), 0.6, 0, 0.1, 'interpolation', 0, 0.9, Row, Column, Angle, Score)
Image
ModelID
rad(-180)
rad(360)
0.6
0
0.1
'interpolation'
0
0.9
Row
Column
Angle
Score
for 0 0 3 1 0 3 0 0
for i := 0 to |Score| - 1 by 1
0
|Score| - 1
1
i
vector_angle_to_rigid 0 0 6 1 1 1 0 0
    vector_angle_to_rigid (RowRef, ColumnRef, 0, Row[i], Column[i], Angle[i], HomMat2D)
RowRef
ColumnRef
0
Row[i]
Column[i]
Angle[i]
HomMat2D
affine_trans_region 1 1 2 0 1 1 0 0
    affine_trans_region (ModelRegion, RegionAffineTrans, HomMat2D, 'false')
ModelRegion
RegionAffineTrans
HomMat2D
'false'
dev_set_color 0 0 1 0 1 2 0 0
    dev_set_color ('green')
'green'
dev_display 1 0 0 0 1 2 0 0
    dev_display (RegionAffineTrans)
RegionAffineTrans
dev_set_color 0 0 1 0 1 2 0 0
    dev_set_color ('red')
'red'
disp_cross 0 0 5 0 1 1 0 0
    disp_cross (WindowHandle, Row[i], Column[i], 30, 0)
WindowHandle
Row[i]
Column[i]
30
0
endfor 0 0 0 0 0 3 28 0
endfor
stop 0 0 0 0 0 3 0 0
stop ()
comment 0 0 1 0 0 3 0 1
* 

comment 0 0 1 0 0 3 0 1
* /////   Pattern Mathing (Extended)   /////
/////   Pattern Mathing (Extended)   /////
tile_images_offset 1 1 8 0 0 1 0 0
tile_images_offset (Image, TiledImage, 75, 75, -1, -1, -1, -1, Width + 150, Height + 150)
Image
TiledImage
75
75
-1
-1
-1
-1
Width + 150
Height + 150
dev_set_window_extents 0 0 4 0 0 2 0 0
dev_set_window_extents (0, 0, Width + 150 - 1, Height + 150 - 1)
0
0
Width + 150 - 1
Height + 150 - 1
full_domain 1 1 0 0 0 1 0 0
full_domain (TiledImage, ImageFull)
TiledImage
ImageFull
dev_display 1 0 0 0 0 2 0 0
dev_display (ImageFull)
ImageFull
find_shape_model 1 0 9 4 0 1 0 0
find_shape_model (ImageFull, ModelID, rad(-180), rad(360), 0.25, 0, 0.1, 'interpolation', 0, 0.9, Row, Column, Angle, Score)
ImageFull
ModelID
rad(-180)
rad(360)
0.25
0
0.1
'interpolation'
0
0.9
Row
Column
Angle
Score
for 0 0 3 1 0 3 0 0
for i := 0 to |Score| - 1 by 1
0
|Score| - 1
1
i
vector_angle_to_rigid 0 0 6 1 1 1 0 0
    vector_angle_to_rigid (RowRef, ColumnRef, 0, Row[i], Column[i], Angle[i], HomMat2D)
RowRef
ColumnRef
0
Row[i]
Column[i]
Angle[i]
HomMat2D
affine_trans_region 1 1 2 0 1 1 0 0
    affine_trans_region (ModelRegion, RegionAffineTrans, HomMat2D, 'false')
ModelRegion
RegionAffineTrans
HomMat2D
'false'
dev_set_color 0 0 1 0 1 2 0 0
    dev_set_color ('green')
'green'
dev_display 1 0 0 0 1 2 0 0
    dev_display (RegionAffineTrans)
RegionAffineTrans
dev_set_color 0 0 1 0 1 2 0 0
    dev_set_color ('red')
'red'
disp_cross 0 0 5 0 1 1 0 0
    disp_cross (WindowHandle, Row[i], Column[i], 30, 0)
WindowHandle
Row[i]
Column[i]
30
0
endfor 0 0 0 0 0 3 44 0
endfor
stop 0 0 0 0 0 3 0 0
stop ()
comment 0 0 1 0 0 3 0 1
* 

clear_shape_model 0 0 1 0 0 1 0 0
clear_shape_model (ModelID)
ModelID
comment 0 0 1 0 0 3 0 1
* 

